# Umardle
Wordle uma version

## UI設計・仕様

0. 画面ステータス

    - 開始前ステータス……遷移時、リセット時のレース選択ステータス / 馬名回答不可
    - 開始後ステータス……ゲーム開始後、馬名回答ステータス / レース選択変更不可 / リセット可能


1. 開始・終了ボタン

    開始前「レース開催」……対象馬を選択し開始後ステータスに移行
    開始後「諦めて答えを見る」……7解答表示欄に対象馬を表示しリセット時ステータスに移行

2. レース選択欄

    以下の内容でレースを選択<br>
    **開始後ステータスでは非活性**

    2-1. チェックボックス3種
    - 地方レースを含む
    - 海外レースを含む
    - 障害レースを含む

    2-2. トグル
    - オプション<br>
        2-2-1. ラジオボタン（2択）
        - G1/Jpn1のみ
        - すべての重賞

3. レースカウント

    「出走」クリックごとにカウント+1、最大12レースで終了

4. 馬名入力欄

    馬名入力欄<br>
    **開始前ステータスでは非活性**

5. 出走ボタン

    馬名入力欄の入力値を取得して判定処理を行う<br>
    **開始前ステータスでは非活性**

6. 解答表示欄

    12R以下で正解時 → 正解メッセージ・馬名を表示
    リセット時・12R超過時 → 不正解メッセージ・馬名を表示

## データ設計

index.htmlにインポートされる定数

対象馬名(list)
```
const horses = ["馬名",...]
```

- central_g1_horses
- central_all_horses
- local_g1_horses
- local_all_horses
- overseas_g1_horses
- overseas_all_horses
- jump_g1_horses
- jump_all_horses

レース情報(dict)
```
const xxx_races = {
    "レースキーワード" : {
        name: "レース名",
        type: "レース種別(芝/ダート)",
        grade: グレード,
        organize: "主催(中央/地方/海外)",
        start: 開始年,
        last: 終了年,
        keyword: "レースキーワード"
    },...
}
```

- central_races
- local_races
- ovearseas_races

レース結果(list)
```
const レースキーワード = [
    {
        race: "レースキーワード",
        year: 開催年,
        horse: "勝ち馬"
    },...
]
```

- 全レース（定数名：レースキーワード）

レースリスト(list)
※対象レースの選択条件用のショートカット
```
const race_list = ["レースキーワード",...]
```

- central_g1
- central_all
- local_g1
- local_all
- overseas_g1
- overseas_all
- jump_g1
- jump_all

## 処理設計

1. 選択レースを基に抽出元リスト/対象馬リストを作成する<br>
    選択レースのレース結果リストをすべて連結する<br>
    デフォルト条件：中央平地G1

1. 抽出元リストからランダムに要素（レース結果）を１つ取得し解答として登録する<br>
    抽出元リストの要素数を上限とするrandom()

1. 入力した馬名が対象馬リストに存在しているか確認する<br>
    存在していない場合は、エラーメッセージを表示する

1. 解答馬名と１字ずつ比較する<br>

1. 文字ごとに完全一致、採用、非採用の分類分けをする<br>

1. 分類分け処理<br>
    1. すべてが一致している → ゲームクリア
    1. 一致リストを更新、不一致の部分があれば入れ替える → 描画
    1. 採用リストを追加（重複は追加しない）、一致リストと重複しているものを削除する → 描画
    1. 不採用リスト追加（重複は追加しない） → 描画

## 追加検討

- 延長機能：13R以降の入力
- ヒント追加：年代ヒントの追加
- 対象レース選択機能：全重賞から任意のレースを対象範囲に設定できるように

## 参考サイト

おうまのアイコン wire-to-wire
https://horseicon.web.fc2.com/
